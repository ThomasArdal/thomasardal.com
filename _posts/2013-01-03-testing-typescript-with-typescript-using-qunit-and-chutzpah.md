---
ID: 805
post_title: >
  Testing TypeScript with TypeScript using
  QUnit and Chutzpah
author: Thomas Ardal
post_date: 2013-01-03 08:04:04
post_excerpt: ""
layout: post
permalink: >
  http://thomasardal.com/testing-typescript-with-typescript-using-qunit-and-chutzpah/
published: true
---
<p>A couple of weeks ago, I decided to switch from <a href="http://coffeescript.org/" target="_blank">CoffeeScript</a> to <a href="http://www.typescriptlang.org/" target="_blank">TypeScript</a> on the project I’m working on at eBay. In my opinion, TypeScript makes a lot of a lot more sense when working with web applications in .NET. These are some of the advantages I’ve identified so far:</p>

<ul>
<li>Great tool support. The Visual Studio add-in for TypeScript offers IntelliSense, which I never really found a good solution for with CoffeeScript.</li>
<li>Strongly typed: TypeScript lets you strongly typed parameters and field.</li>
<li>Modules and classes. Like CoffeeScript, TypeScript makes it a lot easier to define namespaces and classes. I really like the TypeScript syntax better than CoffeeScript.</li>
</ul>

<p>In order for you to try out the examples in this blog post, you need to install <a href="http://www.typescriptlang.org/" target="_blank">TypeScript</a>, <a href="http://visualstudiogallery.msdn.microsoft.com/07d54d12-7133-4e15-becb-6f451ea3bea6" target="_blank">Web Essentials</a> and <a href="http://chutzpah.codeplex.com/" target="_blank">Chutzpah</a> (install through Visual Studio Extensions and Updates).</p>

<p>Porting the existing CoffeeScript files is easy. Grab the existing JavaScript, generated by your CoffeeScript compiler. Paste the content into a new TypeScript file and worry about using the nice features of TypeScript later. I use Web Essentials to edit my TypeScript files and went through all the options for this to work out. Here is a screenshot of my settings:</p><br/>

<p>
<img src="http://thomasardal.com/wp-content/uploads/2012/12/wesettings.png" alt="wesettings" class="alignleft size-full wp-image-823" />
</p>

<p>
I changed the Keep comments to True, in order for my unit tests to work - more about this later. Also Compile TypeScript on save is enabled, because TypeScript as default only compiles the JavaScript on build.
</p>

<p>
Here’s a simple example of a TypeScript file called generator.ts:
</p>

[javascript]
module ThomasArdal {
    export class StringGenerator {
        generate(input: string) {
            return input + &quot;: Hello World&quot;;
        }
    }
}
[/javascript]

This is probably not the most advanced script you have ever seen (I hope), but it illustrates the main features in TypeScript: modules, classes, and strongly typed parameters. The generator method is called by running the following piece of TypeScript:

[javascript]
var gen = new ThomasArdal.StringGenerator();
console.log(gen.generate(&quot;Hi&quot;));
[/javascript]

Now for the purpose of this blog post: the unit test. We are using the excellent JavaScript unit test runner Chutzpah to execute our tests both from within Visual Studio and our TeamCity build server. The unit tests are written using QUnit, but if you prefer Jasmine, Chutzpah supports that as well. To install QUnit in your test project, run the following NuGet command:

<code>Install-Package QUnit-MVC</code>

The qunit.js script is added to your test project in a Scripts root folder. You can change the location of the QUnit script, but if you do, be prepared for some manual work each time you update QUnit to a new version.

Add a new TypeScript file named generator.tests.ts.

[javascript]
///&lt;reference path=&quot;qunit-1.10.d.ts&quot;/&gt;
///&lt;reference path=&quot;generator.ts&quot;/&gt;

QUnit.module(&quot;generator.ts tests&quot;);

test(&quot;Can generate string&quot;, function () {
    // Arrange
    var gen = new ThomasArdal.StringGenerator();

    // Act
    var result = gen.generate(&quot;Hi&quot;);

    // Assert
    equal(result, &quot;Hi: Hello World&quot;, &quot;Result should be concat of input and Hello World&quot;);
});
[/javascript]

<p>Besides a reference to the script we are about to test (generator.ts), I reference a file named qunit-1.10.d.ts. Normally you would reference qunit.js, but in order to get IntelliSense in TypeScript, you need to reference a definition file (d.ts). Luckily Boris Yankov did a great job extracting definition files from various JavaScript frameworks in <a href="https://github.com/borisyankov/DefinitelyTyped" target="_blank">this GitHub project</a>. Another thing to notice here, is the module-function call. Under normal circumstances, you simply call this function directly, but because "module" is a keyword in TypeScript, you need to use the QUnit object instead. Writing the QUnit test is straight forward with an arrange, act and assert.</p>

<p>That's it! Testing TypeScript with TypeScript is easy. Right click your test file and run your test using Chutzpah:</p>

<img src="http://thomasardal.com/wp-content/uploads/2012/12/runtest.png" alt="runtest" class="alignleft size-full wp-image-836" />